<!DOCTYPE html><html class="theme-lattice"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>使用 Vue3 开发小程序 | Aotu.io「凹凸实验室」</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="凹凸实验室"><meta name="designer" content="凹凸实验室"><meta name="rating" content="general"><meta name="format-detection" content="telephone=yes"><meta name="robots" content="index, follow"><meta baidu-gxt-verify-token="2b74a5aea155a215abea8547f929190c"><meta name="keywords" content="Taro3,Vue3,Taro,小程序,凹凸实验室,Aotu,前端开发,全栈开发,IOS开发,Android开发"><link rel="canonical" href="https://aotu.io/notes/2020/09/28/taro-vue3/index.html"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon-48x48.png"><link rel="manifest" href="/img/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#2f83cd"><meta name="application-name" content="Aotu.io"><link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/img/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/img/apple-touch-icon-1024x1024.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Aotu.io"><meta name="msapplication-TileColor" content="#fff"><meta name="msapplication-TileImage" content="/img/mstile-144x144.png"><meta name="msapplication-config" content="/img/browserconfig.xml"><meta property="wb:webmaster" content="a1686eb81db284d5"><link rel="dns-prefetch" href="//storage.360buyimg.com"><link rel="dns-prefetch" href="//img10.360buyimg.com"><link rel="dns-prefetch" href="//img11.360buyimg.com"><link rel="dns-prefetch" href="//img12.360buyimg.com"><link rel="dns-prefetch" href="//img13.360buyimg.com"><link rel="dns-prefetch" href="//img14.360buyimg.com"><link rel="dns-prefetch" href="//img20.360buyimg.com"><link rel="dns-prefetch" href="//img30.360buyimg.com"><link rel="dns-prefetch" href="//misc.aotu.io"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" href="/atom.xml" title="Aotu.io"><meta name="description" content="前言9 月 19 日凌晨，Vue3 在经过多个开发版本的迭代后，终于迎来了它的正式版本，”One Piece” 的代号也昭示了其开拓伟大航路的野心。 Vue3 的新特性主要有 Composition API、Teleport、Fragments 和 &amp;lt;script setup /&amp;gt; &amp;amp; &amp;lt;style vars /&amp;gt; 等。我们是否也可以在小程序开发中使用这些特性呢？在"><meta name="keywords" content="小程序,Taro,Vue3,Taro3"><meta property="og:type" content="article"><meta property="og:title" content="使用 Vue3 开发小程序"><meta property="og:url" content="https://aotu.io/notes/2020/09/28/taro-vue3/index.html"><meta property="og:site_name" content="Aotu.io"><meta property="og:description" content="前言9 月 19 日凌晨，Vue3 在经过多个开发版本的迭代后，终于迎来了它的正式版本，”One Piece” 的代号也昭示了其开拓伟大航路的野心。 Vue3 的新特性主要有 Composition API、Teleport、Fragments 和 &amp;lt;script setup /&amp;gt; &amp;amp; &amp;lt;style vars /&amp;gt; 等。我们是否也可以在小程序开发中使用这些特性呢？在"><meta property="og:locale" content="zh-cn"><meta property="og:image" content="https://img11.360buyimg.com/ling/jfs/t1/129540/5/13685/327737/5f71504fEa7578ae0/c7aad9bde4b56b8f.jpg"><meta property="og:image" content="https://img11.360buyimg.com/imagetools/jfs/t1/122690/30/13412/41842/5f6c47b4E27bb42e4/84d6984f617f40d5.jpg"><meta property="og:image" content="https://img11.360buyimg.com/imagetools/jfs/t1/112794/33/18575/83251/5f6c47fcE9568cf2b/7c788586432d08dd.jpg"><meta property="og:image" content="https://img11.360buyimg.com/imagetools/jfs/t1/148409/34/9169/5767/5f6c49a4Ed96e5c53/3c367fcb592b95b0.jpg"><meta property="og:image" content="https://img14.360buyimg.com/imagetools/jfs/t1/122176/18/13461/1349845/5f6c5d14Eaffd062c/f36c7a7279f8aac6.gif"><meta property="og:image" content="https://img10.360buyimg.com/imagetools/jfs/t1/111884/14/18645/2307115/5f6c6e91E963e9fcc/0b7230301e9d2e0a.gif"><meta property="og:image" content="https://img10.360buyimg.com/imagetools/jfs/t1/132702/4/11153/1478203/5f705361E4db3e0cc/d32765423246de84.gif"><meta property="og:image" content="https://img11.360buyimg.com/imagetools/jfs/t1/146777/39/9447/1836911/5f702d5eE52e470f9/dea5082ff993a478.gif"><meta property="og:updated_time" content="2021-01-14T16:02:23.801Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="使用 Vue3 开发小程序"><meta name="twitter:description" content="前言9 月 19 日凌晨，Vue3 在经过多个开发版本的迭代后，终于迎来了它的正式版本，”One Piece” 的代号也昭示了其开拓伟大航路的野心。 Vue3 的新特性主要有 Composition API、Teleport、Fragments 和 &amp;lt;script setup /&amp;gt; &amp;amp; &amp;lt;style vars /&amp;gt; 等。我们是否也可以在小程序开发中使用这些特性呢？在"><meta name="twitter:image" content="https://img11.360buyimg.com/ling/jfs/t1/129540/5/13685/327737/5f71504fEa7578ae0/c7aad9bde4b56b8f.jpg"><meta name="twitter:site" content="o2circle"><script>var App={root:"/",isHome:!1,isCate:!1,isTag:!1}</script></head><body class="page-post-detail"><div class="mod-hd"><div class="grid"><div class="mod-logo"><a href="/index.html" title="Aotu.io">Aotu.io</a></div><span class="mod-hd-toggle" id="J_hdToggle"><i class="fa fa-bars"></i></span><div class="mod-hd-main"><div class="mod-hd-inner"><nav class="mod-nav"><ul class="mod-nav-list"><li class="main-nav-item"><a href="/index.html" class="main-nav-link">首页</a></li><li class="main-nav-item"><a target="_blank" href="https://geeks.aotu.io" class="main-nav-link">极客沙龙</a></li><li class="main-nav-item"><a href="https://cases.aotu.io" class="main-nav-link">H5案例</a></li><li class="main-nav-item"><a href="/about/" class="main-nav-link">关于</a></li><li class="main-nav-item"><a href="/join/" class="main-nav-link">加入我们</a></li></ul></nav><div class="mod-search" id="J_search"><a class="fa fa-search mod-search-ico" id="J_searchTrigger" title="搜索"></a><form id="J_searchForm" method="get" class="mod-search-form" action="/search/"><input type="text" name="query" class="mod-search-ipt" id="J_searchInput" placeholder="搜索"></form></div></div></div></div></div><div class="mod-container"><div class="grid"><div class="mod-main typo"><article class="post"><div class="post-cover"><img src="https://img14.360buyimg.com/ling/jfs/t1/114796/40/19245/125315/5f715516E5765ae26/2375d621a3c73e76.png" alt="使用 Vue3 开发小程序"></div><header class="post-hd"><h1 class="post-tit">使用 Vue3 开发小程序</h1><div class="post-meta">by <a target="_blank" href="https://github.com/lillian98" class="post-author">lillian</a> on <span>2020-09-28</span></div><p class="post-subtit" style="display:none"><i class="fa fa-quote-left"></i>Vue3 的新特性主要有 Composition API、Teleport、Fragments 等。我们是否也可以在小程序开发中使用这些特性呢？</p><span style="display:none" id="busuanzi_value_page_pv"></span></header><div class="post-content"><h2 id="前言" class="post-heading"><a href="#前言" class="headerlink" title="前言"></a>前言<a class="post-anchor" href="#前言" aria-hidden="true"></a></h2><p>9 月 19 日凌晨，Vue3 在经过多个开发版本的迭代后，终于迎来了它的正式版本，”One Piece” 的代号也昭示了其开拓伟大航路的野心。</p><p>Vue3 的新特性主要有 Composition API、Teleport、Fragments 和 <code>&lt;script setup /&gt;</code> &amp; <code>&lt;style vars /&gt;</code> 等。我们是否也可以在小程序开发中使用这些特性呢？在 Taro 的文档里我们找到了<a href="https://taro-docs.jd.com/taro/docs/vue3" target="_blank" rel="noopener">关于 Vue3 的章节</a>，事不宜迟，让我们开始尝试吧。</p><h2 id="Vue3-部分新特性" class="post-heading"><a href="#Vue3-部分新特性" class="headerlink" title="Vue3 部分新特性"></a>Vue3 部分新特性<a class="post-anchor" href="#Vue3-部分新特性" aria-hidden="true"></a></h2><p>还没了解过 Vue3 的同学也别急，先了解下 Vue3 的新特性吧：</p><h3 id="1-Composition-API" class="post-heading"><a href="#1-Composition-API" class="headerlink" title="1.Composition API"></a>1.Composition API<a class="post-anchor" href="#1-Composition-API" aria-hidden="true"></a></h3><p>Vue2.X 基于 Option API（选项 API）构建组件，一般来说组件拥有 data、methods、computed 等选项。这是一种属性相互隔离的模式，好处是各属性内容分离开，对于新手来说比较友好；但对于大型项目来说，为了修改某个功能，可能需要在一个文件中来回翻页。Vue3 增加了 Composition API 方式（组合 API ），基于 reactivity（响应式）的思想进行组件构建，将逻辑封装到函数中，可以实现类似 ReactHooks 的逻辑组合和重用。对于大型项目，代码按照具体功能划分，而不是分散在不同的生命周期中，逻辑更加一目了然。</p><p><img src="https://img11.360buyimg.com/ling/jfs/t1/129540/5/13685/327737/5f71504fEa7578ae0/c7aad9bde4b56b8f.jpg" alt="图片"></p><h3 id="2-Teleport（传入）" class="post-heading"><a href="#2-Teleport（传入）" class="headerlink" title="2.Teleport（传入）"></a>2.Teleport（传入）<a class="post-anchor" href="#2-Teleport（传入）" aria-hidden="true"></a></h3><p>Teleport 功能，使得我们可以将全屏的组件（例如 Toast）移到 Vue APP 节点外，而不需要在 UI 界面上修改其他组件样式，方便实现全屏蒙层、浮层弹窗等效果。</p><h3 id="3-Fragments（碎片）" class="post-heading"><a href="#3-Fragments（碎片）" class="headerlink" title="3.Fragments（碎片）"></a>3.Fragments（碎片）<a class="post-anchor" href="#3-Fragments（碎片）" aria-hidden="true"></a></h3><p>Vue2.x 版本中，<code>&lt;template /&gt;</code> 标签下不支持放置多个组件，这个限制在 Vue3 中不再存在。这点比较好理解，下述组件设计在 Vue3 中是没有问题的：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Layout.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span>...<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span> <span class="attr">v-bind</span>=<span class="string">"$attrs"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span>...<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-实验性质的语法糖-lt-script-setup-gt-、-lt-style-vars-gt" class="post-heading"><a href="#4-实验性质的语法糖-lt-script-setup-gt-、-lt-style-vars-gt" class="headerlink" title="4.实验性质的语法糖 &lt;script setup&gt;、&lt;style vars&gt;"></a>4.实验性质的语法糖 <code>&lt;script setup&gt;、&lt;style vars&gt;</code><a class="post-anchor" href="#4-实验性质的语法糖-lt-script-setup-gt-、-lt-style-vars-gt" aria-hidden="true"></a></h3><p>a.<code>&lt;script setup&gt;</code>:用于在 SFC 中使用 Composition API 的语法糖，改善在单个文件组件中使用 Composition API 时的体验。</p><p>b.<code>&lt;style vars&gt;</code>: SFC 中状态驱动的 CSS 变量，它提供了直接的 CSS 配置和封装，支持将组件状态驱动的 CSS 变量注入到“单个文件组件”样式中。</p><p>除了以上 4 点之外，Vue3 还提供了自定义渲染，详细可以参考文末的推荐阅读文章。</p><h2 id="如何在-Taro-里使用-Vue3" class="post-heading"><a href="#如何在-Taro-里使用-Vue3" class="headerlink" title="如何在 Taro 里使用 Vue3"></a>如何在 Taro 里使用 Vue3<a class="post-anchor" href="#如何在-Taro-里使用-Vue3" aria-hidden="true"></a></h2><p>Vue3 带来的新特性可以让我们更加优雅和高效地进行开发，现在，来开启我们在 Taro 里使用 Vue3 的体验之旅吧。</p><p>Taro 已经默认安装 Taro3 ，所以正常安装即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 npm 安装 CLI</span></span><br><span class="line">$ npm install -g @tarojs/cli</span><br><span class="line"><span class="comment"># OR 使用 yarn 安装 CLI</span></span><br><span class="line">$ yarn global add @tarojs/cli</span><br><span class="line"><span class="comment"># OR 安装了 cnpm，使用 cnpm 安装 CLI</span></span><br><span class="line">$ cnpm install -g @tarojs/cli</span><br></pre></td></tr></table></figure><p>安装完成之后，使用<code>taro --version</code>查看一下是否安装成功，如果输出版本号说明安装成功。<br>安装成功后，初始化一个项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ taro init</span><br></pre></td></tr></table></figure><p>将出现如下图的一些选型<br><img src="https://img11.360buyimg.com/imagetools/jfs/t1/122690/30/13412/41842/5f6c47b4E27bb42e4/84d6984f617f40d5.jpg" alt="图片"></p><p>如上图：</p><ol><li>请输入项目名称？输入项目名称<code>vuedemo</code></li><li>请输入项目介绍？输入项目介绍<code>a demo project</code></li><li>请选择框架？当然是<code>Vue3</code>啦</li><li>余下选项，如上面 3 个选项，根据自己的需要选择就好，不会有什么问题</li></ol><p>一般情况下，依照提示选型好以后， Taro 会自动安装依赖。如果由于网络问题导致安装不成功，就需要手动在项目路径下进行安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 yarn 安装依赖</span></span><br><span class="line">$ yarn</span><br><span class="line"><span class="comment"># OR 使用 cnpm 安装依赖</span></span><br><span class="line">$ cnpm install</span><br><span class="line"><span class="comment"># OR 使用 npm 安装依赖</span></span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>安装后目录结构：<br><img src="https://img11.360buyimg.com/imagetools/jfs/t1/112794/33/18575/83251/5f6c47fcE9568cf2b/7c788586432d08dd.jpg" alt="图片"></p><p><code>app</code>默认代码如下，我们注意到，Taro3 在新建 Vue3 项目时已经修改了入口组件写法。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./app.scss'</span></span><br><span class="line"><span class="keyword">const</span> App = createApp(&#123;</span><br><span class="line">  onShow (options) &#123;&#125;,</span><br><span class="line">  <span class="comment">// 入口组件不需要实现 render 方法，即使实现了也会被 taro 所覆盖</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App</span><br></pre></td></tr></table></figure><p><code>page/index</code>目录下<code>index</code>文件示例如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">'./index.scss'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  setup () &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> msg = ref(<span class="string">'Hello world'</span>)</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      msg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>编译运行微信小程序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev:weapp</span><br></pre></td></tr></table></figure><p>编译后，打开微信开发者工具导入编译后的<code>dist</code>目录，首页内容和编译成 H5 的表现都如下图：<br><img src="https://img11.360buyimg.com/imagetools/jfs/t1/148409/34/9169/5767/5f6c49a4Ed96e5c53/3c367fcb592b95b0.jpg" alt="图片"></p><h2 id="验证-Taro3-对-Vue3-的支持度" class="post-heading"><a href="#验证-Taro3-对-Vue3-的支持度" class="headerlink" title="验证 Taro3 对 Vue3 的支持度"></a>验证 Taro3 对 Vue3 的支持度<a class="post-anchor" href="#验证-Taro3-对-Vue3-的支持度" aria-hidden="true"></a></h2><h3 id="Composition-API" class="post-heading"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API<a class="post-anchor" href="#Composition-API" aria-hidden="true"></a></h3><p>写个比较简单的 todolist 计数组件，假设目前已有 4 项代办事项，点击后将新增一项。这里会使用到 Composition API 思路，以及 computed 计算属性。</p><p>在用户点击时，第二行“当前操作新增”会根据点击次数递增，总计条数会在 4 的基础上累加。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"increment"</span>&gt;</span></span><br><span class="line">    增加 1</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>当前todolist事项已有：&#123;&#123; existCount &#125;&#125;条；<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>当前操作已新增：&#123;&#123; count &#125;&#125; ，共有&#123;&#123; total &#125;&#125;条。<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref, computed, onMounted, toRefs, watch &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'case1'</span>,</span></span><br><span class="line">  setup(props) &#123;</span><br><span class="line"><span class="actionscript">    <span class="comment">// ref响应式变量</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> count = ref(<span class="number">0</span>)</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> existCount = ref(<span class="number">4</span>)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// computed方法，在count的value发生改变时，会触发计算total</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> total = computed(<span class="function"><span class="params">()</span> =&gt;</span> count.value + existCount.value )</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      count.value++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    onMounted(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'component mounted!'</span>))</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 返回increment方法，existCount、count、total属性，供模板中调用</span></span></span><br><span class="line">      increment,</span><br><span class="line">      existCount,</span><br><span class="line">      count,</span><br><span class="line">      total,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>页面表现如下所示，可见对于 Composition API 的支持的还是不错的。</p><p><img src="https://img14.360buyimg.com/imagetools/jfs/t1/122176/18/13461/1349845/5f6c5d14Eaffd062c/f36c7a7279f8aac6.gif" alt="todo计数"></p><h3 id="Teleport" class="post-heading"><a href="#Teleport" class="headerlink" title="Teleport"></a>Teleport<a class="post-anchor" href="#Teleport" aria-hidden="true"></a></h3><p>写个初次登录用户的欢迎弹窗。用户名从<code>index.vue</code>传入。首页代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Toast</span> <span class="attr">:user</span> = <span class="string">username</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">"teleportToast"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在 Toast.vue 中，我们会写个属性 to 为 teleportToast 的 Teleport 组件，代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"showToast"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span>打开弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- to和index.html中的view id一致 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">"#teleportToast"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-if</span>=<span class="string">"toastFlag"</span> <span class="attr">class</span>=<span class="string">"toast__wrap"</span>  @<span class="attr">tap</span>=<span class="string">"hideToast"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"h2"</span>&gt;</span>弹窗标题：<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"toast__wrap--msg"</span>&gt;</span>欢迎&#123;&#123; user &#125;&#125;，点击关闭<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref,toRefs &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  props:&#123;</span><br><span class="line"><span class="javascript">    user: &#123;<span class="attr">type</span>: <span class="built_in">String</span>&#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props) &#123;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 获取用户名</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> &#123; user &#125; = toRefs(props)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// Toast：显示flag</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> toastFlag = ref(<span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> timer</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> showToast = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="actionscript">      toastFlag.value = <span class="literal">true</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> hideToast = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="actionscript">      toastFlag.value = <span class="literal">false</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      user,</span><br><span class="line">      toastFlag,</span><br><span class="line">      showToast,</span><br><span class="line">      hideToast,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.toast__wrap</span>&#123;</span></span><br><span class="line">  position: fixed;</span><br><span class="line"><span class="css">  <span class="selector-tag">width</span><span class="selector-pseudo">:100</span>%;</span></span><br><span class="line">  height: 100%;</span><br><span class="line"><span class="css">  <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.8</span>);</span></span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  z-index: 101;</span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.h2</span>&#123;</span></span><br><span class="line">    margin: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;--msg&#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在 H5 下是正常显示的，弹窗展示以及关闭功能效果如下；在小程序上却报错了，Taro 团队还需要加把劲：</p><p><img src="https://img10.360buyimg.com/imagetools/jfs/t1/111884/14/18645/2307115/5f6c6e91E963e9fcc/0b7230301e9d2e0a.gif" alt="Teleport"></p><h3 id="Fragments" class="post-heading"><a href="#Fragments" class="headerlink" title="Fragments"></a>Fragments<a class="post-anchor" href="#Fragments" aria-hidden="true"></a></h3><p>Fragments 特性已经在上面的例子中得到验证，使用没有问题。</p><h3 id="script-setup-语法糖" class="post-heading"><a href="#script-setup-语法糖" class="headerlink" title="script setup 语法糖"></a>script setup 语法糖<a class="post-anchor" href="#script-setup-语法糖" aria-hidden="true"></a></h3><p>我们尝试一下<code>&lt;script setup&gt;</code>，组件里的代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>count:&#123;&#123; count &#125;&#125;,msg:&#123;&#123; info &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"incAndChangeInfo"</span>&gt;</span></span><br><span class="line">      增加 1修改msg</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>=<span class="string">" props "</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; ref, toRefs &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line">    props: &#123;</span><br><span class="line"><span class="javascript">      msg: <span class="built_in">String</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">const</span> count = ref(<span class="number">0</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">const</span> info = ref(props.msg)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">const</span> incAndChangeInfo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line">    count.value++</span><br><span class="line"><span class="actionscript">    info.value = <span class="string">"change hello"</span> + count.value</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上述<code>script</code>标签里的代码效果等同于下面：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref, toRefs &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  props: &#123;</span><br><span class="line"><span class="javascript">    msg: <span class="built_in">String</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">  setup(props) &#123;</span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> count = ref(<span class="number">0</span>)</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> info = ref(props.msg)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> incAndChangeInfo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line">    count.value++</span><br><span class="line"><span class="actionscript">    info.value = <span class="string">"change hello"</span> + count.value</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">  <span class="keyword">return</span> &#123;</span></span><br><span class="line">    count,</span><br><span class="line">    info,</span><br><span class="line">    incAndChangeInfo,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>调用它的代码传入 mgs 如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Setup</span> <span class="attr">msg</span>=<span class="string">"hello"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>运行后，小程序和 H5 都是支持的，页面整体表现如下：</p><p><img src="https://img10.360buyimg.com/imagetools/jfs/t1/132702/4/11153/1478203/5f705361E4db3e0cc/d32765423246de84.gif" alt="script setup 语法糖"></p><p>可以看到，运用新特性进行开发，代码书写更加便捷，逻辑更清晰。</p><h3 id="style-vars-语法糖" class="post-heading"><a href="#style-vars-语法糖" class="headerlink" title="style vars 语法糖"></a>style vars 语法糖<a class="post-anchor" href="#style-vars-语法糖" aria-hidden="true"></a></h3><p><code>&lt;style vars&gt;</code>，组件里的代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>文字颜色为&#123;&#123; color &#125;&#125;,点击后变为红色<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref,toRefs &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  props:&#123;</span><br><span class="line"><span class="javascript">    color: &#123;<span class="attr">type</span>: <span class="built_in">String</span>&#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">   data(props) &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      color: ref(props) <span class="comment">//'red'</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props)&#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> &#123; color &#125; = toRefs(props)</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      color,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">vars</span>=<span class="string">"&#123; color &#125;"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.text</span> &#123;</span></span><br><span class="line">  color: var(--color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>调用它的页面里的代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Styledemo</span> <span class="attr">:color</span> = <span class="string">color</span> @<span class="attr">tap</span>=<span class="string">"changeColor"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref, computed, onMounted, toRefs, watch &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Styledemo <span class="keyword">from</span> <span class="string">"@/floors/styledemo"</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  components:&#123;</span><br><span class="line">    Styledemo</span><br><span class="line">  &#125;,</span><br><span class="line">  setup () &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> color = ref(<span class="string">'blue'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> changeColor = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="actionscript">      color.value = <span class="string">'red'</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      changeColor,</span><br><span class="line">      color</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>小程序和 H5 都没有问题，功能效果如下：</p><p><img src="https://img11.360buyimg.com/imagetools/jfs/t1/146777/39/9447/1836911/5f702d5eE52e470f9/dea5082ff993a478.gif" alt="style vars 语法糖"></p><h2 id="结语" class="post-heading"><a href="#结语" class="headerlink" title="结语"></a>结语<a class="post-anchor" href="#结语" aria-hidden="true"></a></h2><p>我们将上述几个 Demo 整合在一个项目中，放在<a href="https://github.com/lillian98/vue3" target="_blank" rel="noopener">Github</a>上，有兴趣的同学可以看看。在线预览地址在<a href="https://lillian98.github.io/vue3/dist/#/pages/index/index" target="_blank" rel="noopener">这里</a>。</p><p>经过验证，Taro3 支持使用最新的 Vue3 开发多端应用，相比之下 H5 的支持度更好一些。</p><p>值得一提的是，Taro 团队在技术上一直保持进取，在 Taro2.0 版本支持了 ReactHooks；根据<a href="https://github.com/NervJS/taro-rfcs/blob/master/rfcs/0001-vue-3-support.md" target="_blank" rel="noopener">Taro RFCS</a>，早在<code>2020-06-03</code>也已经打算支持 Vue3 了。截至目前，Taro 对 Vue3 的支持在小程序端的稍有补足，希望 Taro 团队可以早日补足这个短板。</p><p>推荐文章：</p><ul><li><a href="https://zhuanlan.zhihu.com/p/133819602" target="_blank" rel="noopener">Vue3 和 React </a><a href="https://zhuanlan.zhihu.com/p/133819602" target="_blank" rel="noopener">H</a><a href="https://zhuanlan.zhihu.com/p/133819602" target="_blank" rel="noopener">ooks 对比</a></li><li><a href="https://github.com/vercel/swr" target="_blank" rel="noopener">SWR</a></li><li><a href="http://hcysun.me/vue-design/zh/renderer-advanced.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B2%E6%9F%93%E5%99%A8%E7%9A%84%E5%BA%94%E7%94%A8" target="_blank" rel="noopener">自定义渲染器的应用</a></li></ul><p>参考文章：</p><ul><li>[1]<a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html" target="_blank" rel="noopener">compsition api</a></li><li>[2]<a href="https://v3.cn.vuejs.org/guide/teleport.html#%E4%B8%8E-vue-components-%E4%B8%8E-vue-components-%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">teleport</a></li><li>[3]<a href="https://taro-docs.jd.com/taro/docs/GETTING-STARTED" target="_blank" rel="noopener">taro3安装及使用</a></li></ul><div class="post-tags" style="display:none"><a href="/tags/小程序/">小程序</a> <a href="/tags/Taro/">Taro</a> <a href="/tags/Vue3/">Vue3</a> <a href="/tags/Taro3/">Taro3</a></div><div class="post-categories" style="display:none"><a href="/cates/小程序/">小程序</a></div><div class="post-announce">感谢您的阅读，本文由 <a href="//aotu.io">凹凸实验室</a> 版权所有。如若转载，请注明出处：凹凸实验室（<a href="https://aotu.io/notes/2020/09/28/taro-vue3/">https://aotu.io/notes/2020/09/28/taro-vue3/</a>）</div><div class="post-revision"><i class="fa fa-clock-o"></i> <time class="post-updated" datetime="2021-01-14T16:02:23.801Z">上次更新：2021-01-15 00:02:23</time></div></div><div class="post-nav"><div class="post-nav-next"><a href="/notes/2020/10/13/build-performant-flutter-widget/" title="Flutter 性能优化：打造高性能 widget">Flutter 性能优化：打造高性能 widget <i class="fa fa-chevron-right"></i></a></div><div class="post-nav-prev"><a href="/notes/2020/09/21/jx-weapp-accessible/" title="京喜小程序首页无障碍优化实践"><i class="fa fa-chevron-left"></i> 京喜小程序首页无障碍优化实践</a></div></div><div class="post-comments" id="comments"></div><script>var gitalkOpts={id:"bm90ZXMvMjAyMC8wOS8yOC90YXJvLXZ1ZTMv",owner:"o2team",repo:"o2team.github.io",title:"使用 Vue3 开发小程序",body:"https://aotu.io/notes/2020/09/28/taro-vue3/index.html\n\nVue3 的新特性主要有 Composition API、Teleport、Fragments 等。我们是否也可以在小程序开发中使用这些特性呢？",clientID:"3c4d153e6874260f9c7e",clientSecret:"dd44012504c6168bc05b9266e0554bb28c62ce15",admin:["lillian98"]}</script></article></div><aside class="mod-side" id="sidebar"><div class="mod-side-sec aotuwx"><img class="aotuwx-qrcode" src="/img/qrcode.jpg" alt="关注我们"><div class="aotuwx-slogan">每周推送精选技术文章</div></div><div class="mod-side-sec works"><div class="mod-side-sec-hd"><h2>服务/产品</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="//taro.jd.com" target="_blank" title="Taro">Taro</a></li><li><a href="//taro-ui.jd.com" target="_blank" title="Taro-UI">Taro-UI</a></li><li><a href="//taro-ext.jd.com" target="_blank" title="Taro 物料市场">Taro 物料市场</a></li><li><a href="//taro-club.jd.com" target="_blank" title="Taro 官方论坛">Taro 官方论坛</a></li><li><a href="//cases.aotu.io/mobi/maga.html" target="_blank" title="拇指期刊">拇指期刊</a></li><li><a href="//athena.aotu.io/" target="_blank" title="Athena">Athena</a></li><li><a href="//guide.aotu.io/" target="_blank" title="前端代码规范">前端代码规范</a></li><li><a href="//halojs.aotu.io/" target="_blank" title="HaloJS">HaloJS</a></li><li><a href="//sign.aotu.io/" target="_blank" title="邮件签名工具">邮件签名工具</a></li><li><a href="//mac.aotu.io/" target="_blank" title="MAC全栈环境">MAC全栈环境</a></li><li><a href="//xcel.aotu.io" target="_blank" title="Excel Filter">Excel Filter</a></li><li><a href="//aotu.jd.com/share/" target="_blank" title="凹凸公开课">凹凸公开课</a></li><li><a href="//at.aotu.io" target="_blank" title="AT-UI">AT-UI</a></li></ul></div></div><div class="mod-side-sec favlinks"><div class="mod-side-sec-hd"><h2>友情链接</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="https://www.cloudbase.net" target="_blank" title="小程序·云开发"><img style="width:22px;vertical-align:middle" src="https://img20.360buyimg.com/ling/jfs/t1/57175/5/15617/50216/5dca6729E00cdff5d/631622525425290e.png">小程序·云开发</a></li><li><a href="https://ling.jd.com" target="_blank" title="京东羚珑智能设计">羚珑智能设计</a></li><li><a href="https://jdrd.jd.com" target="_blank" title="京东零售设计服务平台">京东零售设计服务平台</a></li><li><a href="https://jdc.jd.com" target="_blank" title="京东设计中心">JDC京东设计中心</a></li><li><a href="http://dopro.io/" target="_blank" title="腾讯 Deep Ocean">Deep Ocean</a></li><li><a href="http://fex.baidu.com" target="_blank" title="百度Web前端研发部">百度FEX</a></li><li><a href="http://taobaofed.org" target="_blank" title="淘宝前端团队">淘宝FED</a></li><li><a href="http://tgideas.qq.com" target="_blank" title="腾讯互娱设计中心">TGIdeas</a></li><li><a href="http://isux.tencent.com" target="_blank" title="腾讯SNG设计中心">ISUX</a></li><li><a href="http://cdc.tencent.com" target="_blank" title="腾讯用户研究与体验设计中心">CDC</a></li><li><a href="http://ued.ctrip.com" target="_blank" title="携程设计委员会">携程UED</a></li><li><a href="https://uiiiuiii.com/" target="_blank" title="优优教程网">优优教程网</a></li><li><a href="https://www.designup.cn/" target="_blank" title="Designup">Designup</a></li><li><a href="http://eux.baidu.com/" target="_blank" title="百度EUX">百度EUX</a></li></ul></div></div></aside></div></div><div class="mod-backtop" id="backTop"><i class="fa fa-long-arrow-up"></i></div><footer class="mod-ft" id="footer"><div class="grid"><ul class="mod-ft-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="https://github.com/o2team/o2team.github.io" target="_blank"><i class="fa fa-github-alt"></i></a></li></ul><div class="mod-ft-sec mod-ft-copyright"><p>Designed by <a href="http://aotu.io" target="_blank">凹凸实验室</a> @<a target="_blank" href="http://jdc.jd.com">京东用户体验设计部</a></p><p>Copyright &copy; 2021. All Rights Reserved.</p><p><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备15077732号-2</a></p></div></div></footer><script src="/js/bundle/core.js"></script><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="/js/post_wx_share.js"></script><script src="/js/bundle/gitalk.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e850b980d029480b092fdd7503c3f8de";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript" src="https://tajs.qq.com/stats?sId=53685723" charset="UTF-8"></script></body></html>